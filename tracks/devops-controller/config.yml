version: "3"
containers:
- name: jenkins
  image: quay.io/acme_corp/instruqt-jenkins-devops
  ports:
  - 8080
  environment:
    JENKINS_ADMIN_PASSWORD: learn_ansible
    CONTROLLER_PASSWORD: learn_ansible
    CONTROLLER_URL: "https://controller"
  memory: 2048
- name: gitea
  image: gitea/gitea
  ports:
  - 3000
  environment:
    GITEA__DEFAULT__RUN_MODE: dev
    GITEA__database__DB_TYPE: sqlite3
    GITEA__database__PATH: /data/gitea/gitea.db
    GITEA__picture__DISABLE_GRAVATAR: "true"
    GITEA__security__INSTALL_LOCK: "true"
    GITEA__server__DOMAIN: http://gitea
    GITEA__server__OFFLINE_MODE: "true"
    GITEA__server__ROOT_URL: http://gitea:3000
    GITEA__server__SSH_DOMAIN: http://gitea
    GITEA__service__DISABLE_REGISTRATION: "true"
    GITEA__service__REQUIRE_SIGNIN_VIEW: "false"
    GITEA__webhook__ALLOWED_HOST_LIST: "*"
  memory: 2048
virtualmachines:
- name: controller
  image: red-hat-mbu/automation-controller
  shell: /bin/su - rhel -s /bin/bash
  machine_type: n1-standard-4
- name: app-host
  image: red-hat-mbu/rhel8
  shell: /bin/su - rhel -s /bin/bash
  machine_type: n1-standard-2
